{"remainingRequest":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js!V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!V:\\qfsx\\VideoSystem\\vue-element-admin\\src\\views\\editvideo\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\src\\views\\editvideo\\index.vue","mtime":1653307611738},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\babel.config.js","mtime":1653307611687},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEltYWdlQ3JvcHBlciBmcm9tICdAL2NvbXBvbmVudHMvSW1hZ2VDcm9wcGVyJzsKaW1wb3J0IFBhblRodW1iIGZyb20gJ0AvY29tcG9uZW50cy9QYW5UaHVtYic7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBJbWFnZUNyb3BwZXI6IEltYWdlQ3JvcHBlciwKICAgIFBhblRodW1iOiBQYW5UaHVtYgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGltYWdlY3JvcHBlclNob3c6IGZhbHNlLAogICAgICBpbWFnZWNyb3BwZXJLZXk6IDAsCiAgICAgIHZpZGVvOiB7CiAgICAgICAgJ3ZpZGVvSWQnOiAxLAogICAgICAgICd2aWRlb1RpdGxlJzogJ+mcuOeOi+WIq+WnrCcsCiAgICAgICAgJ3ZpZGVvSW5mbyc6ICfmrrXlsI/mpbzvvIjlvKDkuLDmr4XvvInkuI7nqIvonbbooaPvvIjlvKDlm73ojaPvvInmmK/kuIDlr7nmiZMnLAogICAgICAgICd2aWRlb1R5cGVJZCc6IDEsCiAgICAgICAgJ3ZpZGVvU3RhdGVJZCc6IDQsCiAgICAgICAgJ3RodW5tYm5haWxVcmwnOiAnL2ltZy9kZWZhdWx0dmlkZW9pY29uLmpwZycsCiAgICAgICAgJ3ZpZGVvVHlwZSc6IHsKICAgICAgICAgICd2aWRlb3R5cGVJZCc6IDEsCiAgICAgICAgICAndHlwZU5hbWUnOiAn5b2x6KeGJwogICAgICAgIH0sCiAgICAgICAgJ2VkaXREYXRlJzogJzIwMjEtMDQtMjZUMTE6NTk6MTIuMDAwKzAwMDAnLAogICAgICAgICd0VXNlcic6IHsKICAgICAgICAgICd1c2VySWQnOiAxLAogICAgICAgICAgJ3VzZXJOYW1lJzogJ3lvdXJuYW1lJywKICAgICAgICAgICd1c2VyQWdlJzogMjIsCiAgICAgICAgICAndXNlclNleCc6ICfnlLcnLAogICAgICAgICAgJ3Bhc3N3b3JkJzogJzEyMzQ1NicsCiAgICAgICAgICAnZW5jcnlwdGVkUHJvYmxlbSc6ICcxMjMnLAogICAgICAgICAgJ2Zhbk51bSc6IDAsCiAgICAgICAgICAndXNlclRlbCc6ICcxNTU2NjY2NjYyNicsCiAgICAgICAgICAncmVnaXN0ZXJEYXRlJzogJzIwMjEtMDQtMTcgMTU6MTc6MTAnLAogICAgICAgICAgJ2ljb25VcmwnOiAnL3VzZXIvZ2V0SWNvbi9pY29uMS5wbmcnLAogICAgICAgICAgJ3N0YXRlSWQnOiAxCiAgICAgICAgfSwKICAgICAgICAndmlkZW9TdGF0ZSc6IHsKICAgICAgICAgICdzdGF0ZUlkJzogNCwKICAgICAgICAgICdzdGF0ZU5hbWUnOiAn5bey5LiK5p62JwogICAgICAgIH0sCiAgICAgICAgJ3ZpZGVvVXJsJzogJy9zdGF0aWMvdmlkZW8vYndiai5tcDQnLAogICAgICAgICd0aHVtYm5haWxVcmwnOiAnL3ZpZGVvL2dldFZpZGVvSW1hZ2UvdmlkZW8xLnBuZycsCiAgICAgICAgJ3ZpZXdOdW0nOiAxMDcsCiAgICAgICAgJ3BwTnVtJzogNwogICAgICB9LAogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tdW5kZWYKICAgICAgc3RhdGVMaXN0OiBbewogICAgICAgICdzdGF0ZUlkJzogJzQnLAogICAgICAgICdzdGF0ZU5hbWUnOiAn5bey5LiK5p62JwogICAgICB9XSwKICAgICAgdmlkZW9UeXBlTGlzdDogW3sKICAgICAgICAndHlwZU5hbWUnOiAn5b2x6KeGJywKICAgICAgICAndmlkZW90eXBlSWQnOiAxCiAgICAgIH1dLAogICAgICBpbWFnZTogJycsCiAgICAgIHVwbG9hZFVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9hZG1pbi9lZGl0VGh1bWJuYWlsSW1hZ2VVcGxvYWQ/dmlkZW9JZD0nCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZmV0Y2hEYXRhQnlJZCgpOwogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2hEYXRhQnlJZDogZnVuY3Rpb24gZmV0Y2hEYXRhQnlJZCgpIHsKICAgICAgdmFyIGlkID0gdGhpcy4kcm91dGUucGFyYW1zLmlkOwogICAgICB0aGlzLnVwbG9hZFVybCA9IHRoaXMudXBsb2FkVXJsICsgaWQ7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHRoaXMuYXhpb3MoewogICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgdXJsOiAnaHR0cDovL2xvY2FsaG9zdDo4MDgxL2FkbWluL2dldFZpZGVvQnlJZD9pZD0nICsgaWQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIHZtLnZpZGVvID0gcmVzcC5kYXRhOwogICAgICAgIHZtLmltYWdlID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MScgKyB2bS52aWRlby50aHVtYm5haWxVcmw7CiAgICAgIH0pOwogICAgICB0aGlzLmF4aW9zKHsKICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9hZG1pbi9nZXRTdGF0ZUxpc3QnCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICB2bS5zdGF0ZUxpc3QgPSByZXNwLmRhdGE7CiAgICAgIH0pOwogICAgICB0aGlzLmF4aW9zKHsKICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9hZG1pbi9nZXRWaWRlb1R5cGVMaXN0JwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgdm0udmlkZW9UeXBlTGlzdCA9IHJlc3AuZGF0YTsKICAgICAgfSk7CiAgICB9LAogICAgY3JvcFN1Y2Nlc3M6IGZ1bmN0aW9uIGNyb3BTdWNjZXNzKHJlc0RhdGEpIHsKICAgICAgdGhpcy5pbWFnZWNyb3BwZXJTaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuaW1hZ2Vjcm9wcGVyS2V5ID0gdGhpcy5pbWFnZWNyb3BwZXJLZXkgKyAxOwogICAgICB0aGlzLmltYWdlID0gcmVzRGF0YTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWltcGxpZWQtZXZhbAoKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZTogJ+S4iuS8oOaIkOWKnycsCiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgIGR1cmF0aW9uOiAyMDAwCiAgICAgIH0pOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3ZpZGVvJyk7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB0aGlzLmltYWdlY3JvcHBlclNob3cgPSBmYWxzZTsKICAgIH0sCiAgICBvblN1Ym1pdDogZnVuY3Rpb24gb25TdWJtaXQoKSB7CiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHRoaXMuYXhpb3MoewogICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgIGRhdGE6IHZtLnZpZGVvLAogICAgICAgIHVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9hZG1pbi9lZGl0VmlkZW8nCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICB2bS4kbWVzc2FnZSh7CiAgICAgICAgICBtZXNzYWdlOiAn5L+u5pS55oiQ5YqfJywKICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICAgIH0pOwogICAgICAgIHZtLiRyb3V0ZXIucHVzaCgnL3ZpZGVvJyk7CiAgICAgIH0pOwogICAgfSwKICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiBvbkNhbmNlbCgpIHsKICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgbWVzc2FnZTogJ+i/lOWbnuS4rSEnLAogICAgICAgIHR5cGU6ICdzdWNjZXNzJwogICAgICB9KTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy91c2VyJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqDA;AACA;AAEA;EACAA;IAAAC;IAAAC;EAAA,CADA;EAEAC,IAFA,kBAEA;IACA;MACAC,uBADA;MAEAC,kBAFA;MAGAC;QACA,YADA;QAEA,oBAFA;QAGA,oCAHA;QAIA,gBAJA;QAKA,iBALA;QAMA,4CANA;QAOA;UACA,gBADA;UAEA;QAFA,CAPA;QAWA,0CAXA;QAYA;UACA,WADA;UAEA,sBAFA;UAGA,aAHA;UAIA,cAJA;UAKA,oBALA;UAMA,yBANA;UAOA,WAPA;UAQA,wBARA;UASA,qCATA;UAUA,oCAVA;UAWA;QAXA,CAZA;QAyBA;UACA,YADA;UAEA;QAFA,CAzBA;QA6BA,oCA7BA;QA8BA,iDA9BA;QA+BA,cA/BA;QAgCA;MAhCA,CAHA;MAqCA;MACAC;QACA,cADA;QAEA;MAFA,EAtCA;MA0CAC;QACA,gBADA;QAEA;MAFA,EA1CA;MA+CAC,SA/CA;MAgDAC;IAhDA;EAkDA,CArDA;EAsDAC,OAtDA,qBAsDA;IACA;EACA,CAxDA;EAyDAC;IAEAC,aAFA,2BAEA;MACA;MACA;MACA;MACA;QACAC,aADA;QAEAC;MAFA,GAGAC,IAHA,CAGA;QACAC;QACAA;MACA,CANA;MAOA;QACAH,aADA;QAEAC;MAFA,GAGAC,IAHA,CAGA;QACAC;MACA,CALA;MAMA;QACAH,aADA;QAEAC;MAFA,GAGAC,IAHA,CAGA;QACAC;MACA,CALA;IAMA,CAzBA;IA2BAC,WA3BA,uBA2BAC,OA3BA,EA2BA;MACA;MACA;MACA,qBAHA,CAIA;;MAEA;QACAC,eADA;QAEAC,eAFA;QAGAC;MAHA;MAKA;IACA,CAvCA;IAwCAC,KAxCA,mBAwCA;MACA;IACA,CA1CA;IA2CAC,QA3CA,sBA2CA;MACA;MACA;QACAV,cADA;QAEAX,cAFA;QAGAY;MAHA,GAIAC,IAJA,CAIA;QACAC;UACAG,eADA;UAEAC;QAFA;QAIAJ;MACA,CAVA;IAWA,CAxDA;IAyDAQ,QAzDA,sBAyDA;MACA;QACAL,eADA;QAEAC;MAFA;MAIA;IACA;EA/DA;AAzDA","names":["components","ImageCropper","PanThumb","data","imagecropperShow","imagecropperKey","video","stateList","videoTypeList","image","uploadUrl","created","methods","fetchDataById","method","url","then","vm","cropSuccess","resData","message","type","duration","close","onSubmit","onCancel"],"sourceRoot":"src/views/editvideo","sources":["index.vue"],"sourcesContent":["<template>\r\n\r\n  <div class=\"app-container\">\r\n    <el-form ref=\"form\" :model=\"video\" label-width=\"120px\">\r\n      <el-form-item label=\"视频名称\">\r\n        <el-input v-model=\"video.videoTitle\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"视频信息\">\r\n        <el-col :span=\"8\">\r\n          <el-input :rows=\"5\" v-model=\"video.videoInfo\" type=\"textarea\"/>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"视频类型\">\r\n        <el-select v-model=\"video.videoTypeId\" placeholder=\"请选择\">\r\n          <el-option v-for=\"item in videoTypeList\" :key=\"item.typeName\" :label=\"item.typeName\"\r\n                     :value=\"item.videotypeId\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"视频状态\">\r\n        <el-select v-model=\"video.videoStateId\" placeholder=\"请选择\">\r\n          <el-option v-for=\"item in stateList\" :key=\"item.stateName\" :label=\"item.stateName\" :value=\"item.stateId\"/>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"onSubmit\">编辑</el-button>\r\n        <el-button @click=\"onCancel()\">取消</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <pan-thumb :image=\"image\"/>\r\n\r\n    <el-button type=\"primary\" icon=\"el-icon-upload\" style=\"position: absolute;bottom: 15px;margin-left: 40px;\"\r\n               @click=\"imagecropperShow=true\"\r\n    >\r\n      修改缩略图\r\n    </el-button>\r\n\r\n    <image-cropper\r\n      v-show=\"imagecropperShow\"\r\n      :key=\"imagecropperKey\"\r\n      :width=\"210\"\r\n      :height=\"300\"\r\n      :url=\"uploadUrl\"\r\n      lang-type=\"en\"\r\n      @close=\"close\"\r\n      @crop-upload-success=\"cropSuccess\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ImageCropper from '@/components/ImageCropper'\r\nimport PanThumb from '@/components/PanThumb'\r\n\r\nexport default {\r\n  components: { ImageCropper, PanThumb },\r\n  data() {\r\n    return {\r\n      imagecropperShow: false,\r\n      imagecropperKey: 0,\r\n      video: {\r\n        'videoId': 1,\r\n        'videoTitle': '霸王别姬',\r\n        'videoInfo': '段小楼（张丰毅）与程蝶衣（张国荣）是一对打',\r\n        'videoTypeId': 1,\r\n        'videoStateId': 4,\r\n        'thunmbnailUrl': '/img/defaultvideoicon.jpg',\r\n        'videoType': {\r\n          'videotypeId': 1,\r\n          'typeName': '影视'\r\n        },\r\n        'editDate': '2021-04-26T11:59:12.000+0000',\r\n        'tUser': {\r\n          'userId': 1,\r\n          'userName': 'yourname',\r\n          'userAge': 22,\r\n          'userSex': '男',\r\n          'password': '123456',\r\n          'encryptedProblem': '123',\r\n          'fanNum': 0,\r\n          'userTel': '15566666626',\r\n          'registerDate': '2021-04-17 15:17:10',\r\n          'iconUrl': '/user/getIcon/icon1.png',\r\n          'stateId': 1\r\n        },\r\n        'videoState': {\r\n          'stateId': 4,\r\n          'stateName': '已上架'\r\n        },\r\n        'videoUrl': '/static/video/bwbj.mp4',\r\n        'thumbnailUrl': '/video/getVideoImage/video1.png',\r\n        'viewNum': 107,\r\n        'ppNum': 7\r\n      },\r\n      // eslint-disable-next-line no-undef\r\n      stateList: [{\r\n        'stateId': '4',\r\n        'stateName': '已上架'\r\n      }],\r\n      videoTypeList: [{\r\n        'typeName': '影视',\r\n        'videotypeId': 1\r\n      }\r\n      ],\r\n      image: '',\r\n      uploadUrl: 'http://localhost:8081/admin/editThumbnailImageUpload?videoId='\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchDataById()\r\n  },\r\n  methods: {\r\n\r\n    fetchDataById() {\r\n      var id = this.$route.params.id\r\n      this.uploadUrl = this.uploadUrl + id\r\n      var vm = this\r\n      this.axios({\r\n        method: 'GET',\r\n        url: 'http://localhost:8081/admin/getVideoById?id=' + id\r\n      }).then(function(resp) {\r\n        vm.video = resp.data\r\n        vm.image = 'http://localhost:8081' + vm.video.thumbnailUrl\r\n      })\r\n      this.axios({\r\n        method: 'GET',\r\n        url: 'http://localhost:8081/admin/getStateList'\r\n      }).then(function(resp) {\r\n        vm.stateList = resp.data\r\n      })\r\n      this.axios({\r\n        method: 'GET',\r\n        url: 'http://localhost:8081/admin/getVideoTypeList'\r\n      }).then(function(resp) {\r\n        vm.videoTypeList = resp.data\r\n      })\r\n    },\r\n\r\n    cropSuccess(resData) {\r\n      this.imagecropperShow = false\r\n      this.imagecropperKey = this.imagecropperKey + 1\r\n      this.image = resData\r\n      // eslint-disable-next-line no-implied-eval\r\n\r\n      this.$message({\r\n        message: '上传成功',\r\n        type: 'success',\r\n        duration: 2000\r\n      })\r\n      this.$router.push('/video')\r\n    },\r\n    close() {\r\n      this.imagecropperShow = false\r\n    },\r\n    onSubmit() {\r\n      var vm = this\r\n      this.axios({\r\n        method: 'POST',\r\n        data: vm.video,\r\n        url: 'http://localhost:8081/admin/editVideo'\r\n      }).then(function(resp) {\r\n        vm.$message({\r\n          message: '修改成功',\r\n          type: 'success'\r\n        })\r\n        vm.$router.push('/video')\r\n      })\r\n    },\r\n    onCancel() {\r\n      this.$message({\r\n        message: '返回中!',\r\n        type: 'success'\r\n      })\r\n      this.$router.push('/user')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.line {\r\n  text-align: center;\r\n}\r\n\r\n.el-input {\r\n  width: 200px;\r\n}\r\n\r\n.avatar {\r\n  width: 120px;\r\n  height: 200px;\r\n}\r\n</style>\r\n\r\n"]}]}
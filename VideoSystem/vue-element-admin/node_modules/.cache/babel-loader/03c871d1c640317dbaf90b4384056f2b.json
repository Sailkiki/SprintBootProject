{"remainingRequest":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js!V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!V:\\qfsx\\VideoSystem\\vue-element-admin\\src\\views\\addvideo\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\src\\views\\addvideo\\index.vue","mtime":1653307611734},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\babel.config.js","mtime":1653307611687},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEltYWdlQ3JvcHBlciBmcm9tICdAL2NvbXBvbmVudHMvSW1hZ2VDcm9wcGVyJzsKaW1wb3J0IFBhblRodW1iIGZyb20gJ0AvY29tcG9uZW50cy9QYW5UaHVtYic7CmltcG9ydCBFbGVVcGxvYWRWaWRlbyBmcm9tICd2dWUtZWxlLXVwbG9hZC12aWRlbyc7CmltcG9ydCBxcyBmcm9tICdxcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBJbWFnZUNyb3BwZXI6IEltYWdlQ3JvcHBlciwKICAgIFBhblRodW1iOiBQYW5UaHVtYiwKICAgIEVsZVVwbG9hZFZpZGVvOiBFbGVVcGxvYWRWaWRlbwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGltYWdlY3JvcHBlclNob3c6IGZhbHNlLAogICAgICBpbWFnZWNyb3BwZXJLZXk6IDAsCiAgICAgIHZpZGVvOiB7CiAgICAgICAgJ3ZpZGVvSWQnOiBudWxsLAogICAgICAgICd2aWRlb1RpdGxlJzogJycsCiAgICAgICAgJ3ZpZGVvSW5mbyc6ICcnLAogICAgICAgICd2aWRlb1R5cGVJZCc6IG51bGwsCiAgICAgICAgJ3ZpZGVvU3RhdGVJZCc6IG51bGwsCiAgICAgICAgJ3RodW5tYm5haWxVcmwnOiAnJywKICAgICAgICAndmlkZW9UeXBlJzogewogICAgICAgICAgJ3ZpZGVvdHlwZUlkJzogbnVsbCwKICAgICAgICAgICd0eXBlTmFtZSc6ICcnCiAgICAgICAgfSwKICAgICAgICAnZWRpdERhdGUnOiAnJywKICAgICAgICAndFVzZXInOiB7CiAgICAgICAgICAndXNlcklkJzogbnVsbCwKICAgICAgICAgICd1c2VyTmFtZSc6ICcnLAogICAgICAgICAgJ3VzZXJBZ2UnOiBudWxsLAogICAgICAgICAgJ3VzZXJTZXgnOiAnJywKICAgICAgICAgICdwYXNzd29yZCc6ICcnLAogICAgICAgICAgJ2VuY3J5cHRlZFByb2JsZW0nOiAnJywKICAgICAgICAgICdmYW5OdW0nOiAwLAogICAgICAgICAgJ3VzZXJUZWwnOiAnJywKICAgICAgICAgICdyZWdpc3RlckRhdGUnOiAnJywKICAgICAgICAgICdpY29uVXJsJzogJycsCiAgICAgICAgICAnc3RhdGVJZCc6IG51bGwKICAgICAgICB9LAogICAgICAgICd2aWRlb1N0YXRlJzogewogICAgICAgICAgJ3N0YXRlSWQnOiBudWxsLAogICAgICAgICAgJ3N0YXRlTmFtZSc6ICcnCiAgICAgICAgfSwKICAgICAgICAndmlkZW9VcmwnOiAnJywKICAgICAgICAndGh1bWJuYWlsVXJsJzogJycsCiAgICAgICAgJ3ZpZXdOdW0nOiBudWxsLAogICAgICAgICdwcE51bSc6IG51bGwKICAgICAgfSwKICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVuZGVmCiAgICAgIHN0YXRlTGlzdDogW3sKICAgICAgICAnc3RhdGVJZCc6ICcnLAogICAgICAgICdzdGF0ZU5hbWUnOiAnJwogICAgICB9XSwKICAgICAgdmlkZW9UeXBlTGlzdDogW3sKICAgICAgICAndHlwZU5hbWUnOiAnJywKICAgICAgICAndmlkZW90eXBlSWQnOiBudWxsCiAgICAgIH1dLAogICAgICBpbWFnZTogJycsCiAgICAgIHVwbG9hZFVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MS9hZG1pbi90aHVtYm5haWxJbWFnZXVwbG9hZD92aWRlb0lkPScKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGFCeUlkKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVVcGxvYWRFcnJvcjogZnVuY3Rpb24gaGFuZGxlVXBsb2FkRXJyb3IoZXJyb3IpIHsKICAgICAgY29uc29sZS5sb2coJ2Vycm9yJywgZXJyb3IpOwogICAgfSwKICAgIGhhbmRsZVJlc3BvbnNlOiBmdW5jdGlvbiBoYW5kbGVSZXNwb25zZShyZXNwb25zZSkgewogICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhKTsKICAgICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7CiAgICB9LAogICAgZmV0Y2hEYXRhQnlJZDogZnVuY3Rpb24gZmV0Y2hEYXRhQnlJZCgpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjgwODEvYWRtaW4vZ2V0U3RhdGVMaXN0JwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgdm0uc3RhdGVMaXN0ID0gcmVzcC5kYXRhOwogICAgICB9KTsKICAgICAgdGhpcy5heGlvcyh7CiAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjgwODEvYWRtaW4vZ2V0VmlkZW9UeXBlTGlzdCcKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIHZtLnZpZGVvVHlwZUxpc3QgPSByZXNwLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIG9uU3VibWl0OiBmdW5jdGlvbiBvblN1Ym1pdCgpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgY29uc29sZS5sb2codm0udmlkZW8pOwogICAgICB0aGlzLmF4aW9zKHsKICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICBkYXRhOiB2bS52aWRlbywKICAgICAgICB1cmw6ICdodHRwOi8vbG9jYWxob3N0OjgwODEvYWRtaW4vYWRkVmlkZW8nLAogICAgICAgIHRyYW5zZm9ybVJlcXVlc3Q6IFtmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAzMDIpIHsKICAgICAgICAgICAgYWxlcnQoInN1Y2MiKTsKICAgICAgICAgIH0KCiAgICAgICAgICBkYXRhID0gcXMuc3RyaW5naWZ5KGRhdGEpOwogICAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgICAgfV0sCiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwKSB7CiAgICAgICAgdm0uJG1lc3NhZ2UoewogICAgICAgICAgbWVzc2FnZTogJ+a3u+WKoOaIkOWKnycsCiAgICAgICAgICB0eXBlOiAnc3VjY2VzcycKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgb25DYW5jZWw6IGZ1bmN0aW9uIG9uQ2FuY2VsKCkgewogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiAn6L+U5Zue5LitIScsCiAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnCiAgICAgIH0pOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3VzZXInKTsKICAgIH0sCiAgICBjcm9wU3VjY2VzczogZnVuY3Rpb24gY3JvcFN1Y2Nlc3MocmVzRGF0YSkgewogICAgICB0aGlzLmltYWdlY3JvcHBlclNob3cgPSBmYWxzZTsKICAgICAgdGhpcy5pbWFnZWNyb3BwZXJLZXkgPSB0aGlzLmltYWdlY3JvcHBlcktleSArIDE7CiAgICAgIHRoaXMuaW1hZ2UgPSByZXNEYXRhOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8taW1wbGllZC1ldmFsCgogICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICBtZXNzYWdlOiAn5LiK5Lyg5oiQ5YqfJywKICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgZHVyYXRpb246IDIwMDAKICAgICAgfSk7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB0aGlzLmltYWdlY3JvcHBlclNob3cgPSBmYWxzZTsKICAgIH0KICB9Cn07"},{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AAEA;EACAA;IAAAC;IAAAC;IAAAC;EAAA,CADA;EAEAC,IAFA,kBAEA;IACA;MACAC,uBADA;MAEAC,kBAFA;MAGAC;QACA,eADA;QAEA,gBAFA;QAGA,eAHA;QAIA,mBAJA;QAKA,oBALA;QAMA,mBANA;QAOA;UACA,mBADA;UAEA;QAFA,CAPA;QAWA,cAXA;QAYA;UACA,cADA;UAEA,cAFA;UAGA,eAHA;UAIA,aAJA;UAKA,cALA;UAMA,sBANA;UAOA,WAPA;UAQA,aARA;UASA,kBATA;UAUA,aAVA;UAWA;QAXA,CAZA;QAyBA;UACA,eADA;UAEA;QAFA,CAzBA;QA6BA,cA7BA;QA8BA,kBA9BA;QA+BA,eA/BA;QAgCA;MAhCA,CAHA;MAqCA;MACAC;QACA,aADA;QAEA;MAFA,EAtCA;MA0CAC;QACA,cADA;QAEA;MAFA,EA1CA;MA+CAC,SA/CA;MAgDAC;IAhDA;EAkDA,CArDA;EAsDAC,OAtDA,qBAsDA;IACA;EACA,CAxDA;EAyDAC;IACAC,iBADA,6BACAC,KADA,EACA;MACAC;IACA,CAHA;IAIAC,cAJA,0BAIAC,QAJA,EAIA;MACAF;MACA;IACA,CAPA;IAQAG,aARA,2BAQA;MACA;MACA;QACAC,aADA;QAEAC;MAFA,GAGAC,IAHA,CAGA;QACAC;MACA,CALA;MAMA;QACAH,aADA;QAEAC;MAFA,GAGAC,IAHA,CAGA;QACAC;MACA,CALA;IAMA,CAtBA;IAuBAC,QAvBA,sBAuBA;MACA;MACAR;MACA;QACAI,cADA;QAEAhB,cAFA;QAGAiB,2CAHA;QAIAI;UACA;YACAC;UACA;;UACAtB;UACA;QACA,CANA,CAJA;QAWAuB;UACA;QADA;MAXA,GAcAL,IAdA,CAcA;QACAC;UACAK,eADA;UAEAC;QAFA;MAIA,CAnBA;IAoBA,CA9CA;IA+CAC,QA/CA,sBA+CA;MACA;QACAF,eADA;QAEAC;MAFA;MAIA;IACA,CArDA;IAsDAE,WAtDA,uBAsDAC,OAtDA,EAsDA;MACA;MACA;MACA,qBAHA,CAIA;;MAEA;QACAJ,eADA;QAEAC,eAFA;QAGAI;MAHA;IAKA,CAjEA;IAkEAC,KAlEA,mBAkEA;MACA;IACA;EApEA;AAzDA","names":["components","ImageCropper","PanThumb","EleUploadVideo","data","imagecropperShow","imagecropperKey","video","stateList","videoTypeList","image","uploadUrl","created","methods","handleUploadError","error","console","handleResponse","response","fetchDataById","method","url","then","vm","onSubmit","transformRequest","alert","headers","message","type","onCancel","cropSuccess","resData","duration","close"],"sourceRoot":"src/views/addvideo","sources":["index.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-form ref=\"form\" :model=\"video\" label-width=\"120px\">\r\n      <el-form-item label=\"视频名称\">\r\n        <el-input v-model=\"video.videoTitle\"/>\r\n      </el-form-item>\r\n      <el-form-item label=\"视频信息\">\r\n        <el-col :span=\"8\">\r\n          <el-input :rows=\"5\" v-model=\"video.videoInfo\" type=\"textarea\"/>\r\n        </el-col>\r\n      </el-form-item>\r\n      <el-form-item label=\"视频类型\">\r\n        <el-select v-model=\"video.videoTypeId\" placeholder=\"请选择\">\r\n          <el-option v-for=\"item in videoTypeList\" :key=\"item.typeName\" :label=\"item.typeName\"\r\n                     :value=\"item.videotypeId\"\r\n          />\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item label=\"视频状态\">\r\n        <el-select v-model=\"video.videoStateId\" placeholder=\"请选择\">\r\n          <el-option v-for=\"item in stateList\" :key=\"item.stateName\" :label=\"item.stateName\" :value=\"item.stateId\"/>\r\n        </el-select>\r\n      </el-form-item>\r\n\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"onSubmit\">确定</el-button>\r\n        <el-button @click=\"onCancel()\">取消</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <pan-thumb :image=\"image\"/>\r\n\r\n    <el-button type=\"primary\" icon=\"el-icon-upload\" style=\"position: relative;bottom: 15px;margin-left: 40px;\"\r\n               @click=\"imagecropperShow=true\"\r\n    >\r\n      添加缩略图\r\n    </el-button>\r\n\r\n    <image-cropper\r\n      v-show=\"imagecropperShow\"\r\n      :key=\"imagecropperKey\"\r\n      :width=\"210\"\r\n      :height=\"300\"\r\n      :url=\"uploadUrl\"\r\n      lang-type=\"en\"\r\n      @close=\"close\"\r\n      @crop-upload-success=\"cropSuccess\"\r\n    />\r\n    <ele-upload-video\r\n      :data=\"{\r\n      /*token: token*/\r\n    }\"\r\n      :fileSize=\"1024\"\r\n      @error=\"handleUploadError\"\r\n      :responseFn=\"handleResponse\"\r\n      style=\"margin: 50px\"\r\n      action=\"http://localhost:8081/admin/adminVideoUpload\"\r\n      v-model=\"video.videoUrl\"\r\n    />\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ImageCropper from '@/components/ImageCropper'\r\nimport PanThumb from '@/components/PanThumb'\r\nimport EleUploadVideo from 'vue-ele-upload-video'\r\nimport qs from 'qs'\r\n\r\nexport default {\r\n  components: { ImageCropper, PanThumb, EleUploadVideo },\r\n  data() {\r\n    return {\r\n      imagecropperShow: false,\r\n      imagecropperKey: 0,\r\n      video: {\r\n        'videoId': null,\r\n        'videoTitle': '',\r\n        'videoInfo': '',\r\n        'videoTypeId': null,\r\n        'videoStateId': null,\r\n        'thunmbnailUrl': '',\r\n        'videoType': {\r\n          'videotypeId': null,\r\n          'typeName': ''\r\n        },\r\n        'editDate': '',\r\n        'tUser': {\r\n          'userId': null,\r\n          'userName': '',\r\n          'userAge': null,\r\n          'userSex': '',\r\n          'password': '',\r\n          'encryptedProblem': '',\r\n          'fanNum': 0,\r\n          'userTel': '',\r\n          'registerDate': '',\r\n          'iconUrl': '',\r\n          'stateId': null\r\n        },\r\n        'videoState': {\r\n          'stateId': null,\r\n          'stateName': ''\r\n        },\r\n        'videoUrl': '',\r\n        'thumbnailUrl': '',\r\n        'viewNum': null,\r\n        'ppNum': null\r\n      },\r\n      // eslint-disable-next-line no-undef\r\n      stateList: [{\r\n        'stateId': '',\r\n        'stateName': ''\r\n      }],\r\n      videoTypeList: [{\r\n        'typeName': '',\r\n        'videotypeId': null\r\n      }\r\n      ],\r\n      image: '',\r\n      uploadUrl: 'http://localhost:8081/admin/thumbnailImageupload?videoId='\r\n    }\r\n  },\r\n  created() {\r\n    this.fetchDataById()\r\n  },\r\n  methods: {\r\n    handleUploadError(error) {\r\n      console.log('error', error)\r\n    },\r\n    handleResponse(response) {\r\n      console.log(response.data)\r\n      return response.data\r\n    },\r\n    fetchDataById() {\r\n      var vm = this\r\n      this.axios({\r\n        method: 'GET',\r\n        url: 'http://localhost:8081/admin/getStateList'\r\n      }).then(function(resp) {\r\n        vm.stateList = resp.data\r\n      })\r\n      this.axios({\r\n        method: 'GET',\r\n        url: 'http://localhost:8081/admin/getVideoTypeList'\r\n      }).then(function(resp) {\r\n        vm.videoTypeList = resp.data\r\n      })\r\n    },\r\n    onSubmit() {\r\n      var vm = this\r\n      console.log(vm.video)\r\n      this.axios({\r\n        method: 'POST',\r\n        data: vm.video,\r\n        url: 'http://localhost:8081/admin/addVideo',\r\n        transformRequest: [function(data) {\r\n          if(data.code == 302) {\r\n            alert(\"succ\")\r\n          }\r\n          data = qs.stringify(data)\r\n          return data\r\n        }],\r\n        headers: {\r\n          'Content-Type': 'application/x-www-form-urlencoded'\r\n        }\r\n      }).then(function(resp) {\r\n        vm.$message({\r\n          message: '添加成功',\r\n          type: 'success'\r\n        })\r\n      })\r\n    },\r\n    onCancel() {\r\n      this.$message({\r\n        message: '返回中!',\r\n        type: 'success'\r\n      })\r\n      this.$router.push('/user')\r\n    },\r\n    cropSuccess(resData) {\r\n      this.imagecropperShow = false\r\n      this.imagecropperKey = this.imagecropperKey + 1\r\n      this.image = resData\r\n      // eslint-disable-next-line no-implied-eval\r\n\r\n      this.$message({\r\n        message: '上传成功',\r\n        type: 'success',\r\n        duration: 2000\r\n      })\r\n    },\r\n    close() {\r\n      this.imagecropperShow = false\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.line {\r\n  text-align: center;\r\n}\r\n.el-input {\r\n  width: 200px;\r\n}\r\n.avatar {\r\n  width: 120px;\r\n  height: 200px;\r\n}\r\n</style>\r\n\r\n"]}]}
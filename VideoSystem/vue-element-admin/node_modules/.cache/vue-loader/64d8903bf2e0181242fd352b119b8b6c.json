{"remainingRequest":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\vue-ele-upload-video\\lib\\EleUploadVideo.vue?vue&type=script&lang=js&","dependencies":[{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\vue-ele-upload-video\\lib\\EleUploadVideo.vue","mtime":499162500000},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"V:\\qfsx\\VideoSystem\\vue-element-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVnVlSG92ZXJNYXNrIGZyb20gInZ1ZS1ob3Zlci1tYXNrIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBuYW1lOiAiRWxlVXBsb2FkVmlkZW8iLA0KICBjb21wb25lbnRzOiB7DQogICAgVnVlSG92ZXJNYXNrLA0KICB9LA0KICBwcm9wczogew0KICAgIC8vIOWAvA0KICAgIHZhbHVlOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgfSwNCiAgICAvLyDkuIrkvKDlnLDlnYANCiAgICBhY3Rpb246IHsNCiAgICAgIHR5cGU6IFN0cmluZywNCiAgICAgIHJlcXVpcmVkOiB0cnVlLA0KICAgIH0sDQogICAgLy8g5ZON5bqU5aSE55CG5Ye95pWwDQogICAgcmVzcG9uc2VGbjogRnVuY3Rpb24sDQogICAgLy8g5paH5Lu25aSn5bCP6ZmQ5Yi2KE1iKQ0KICAgIGZpbGVTaXplOiB7DQogICAgICB0eXBlOiBOdW1iZXIsDQogICAgfSwNCiAgICAvLyDmmL7npLrlrr3luqYocHgpDQogICAgd2lkdGg6IHsNCiAgICAgIHR5cGU6IE51bWJlciwNCiAgICAgIGRlZmF1bHQ6IDM2MCwNCiAgICB9LA0KICAgIC8vIOaYvuekuumrmOW6pijpu5jorqRhdXRvKQ0KICAgIGhlaWdodDogew0KICAgICAgdHlwZTogTnVtYmVyLA0KICAgIH0sDQogICAgLy8g5piv5ZCm5pi+56S65o+Q56S6DQogICAgaXNTaG93VGlwOiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogdHJ1ZSwNCiAgICB9LA0KICAgIC8vIOaYr+WQpuaYvuekuuS4iuS8oOaIkOWKn+eahOaPkOekug0KICAgIGlzU2hvd1N1Y2Nlc3NUaXA6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlLA0KICAgIH0sDQogICAgLy8g5paH5Lu257G75Z6LDQogICAgZmlsZVR5cGU6IHsNCiAgICAgIHR5cGU6IEFycmF5LA0KICAgIH0sDQogICAgLy8g6K6+572u5LiK5Lyg55qE6K+35rGC5aS06YOoKOWQjOWumOe9kSkNCiAgICBoZWFkZXJzOiBPYmplY3QsDQogICAgLy8g5pSv5oyB5Y+R6YCBIGNvb2tpZSDlh63or4Hkv6Hmga8gKOWQjOWumOe9kSkNCiAgICB3aXRoQ3JlZGVudGlhbHM6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiBmYWxzZSwNCiAgICB9LA0KICAgIC8vIOS4iuS8oOaXtumZhOW4pueahOmineWkluWPguaVsCjlkIzlrpjnvZEpDQogICAgZGF0YTogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgIH0sDQogICAgLy8g5LiK5Lyg55qE5paH5Lu25a2X5q615ZCNICjlkIzlrpjnvZEpDQogICAgbmFtZTogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogImZpbGUiLA0KICAgIH0sDQogICAgLy8g6KaG55uW6buY6K6k55qE5LiK5Lyg6KGM5Li677yM5Y+v5Lul6Ieq5a6a5LmJ5LiK5Lyg55qE5a6e546wICjlkIzlrpjnvZEpDQogICAgaHR0cFJlcXVlc3Q6IEZ1bmN0aW9uLA0KICAgIC8vIOaOpeWPl+S4iuS8oOeahOaWh+S7tuexu+Wei++8iHRodW1ibmFpbC1tb2RlIOaooeW8j+S4i+atpOWPguaVsOaXoOaViO+8iSjlkIzlrpjnvZEpDQogICAgYWNjZXB0OiBTdHJpbmcsDQogICAgLy8g5Yig6Zmk5YmN55qE5pON5L2cKOWQjOWumOe9kSkNCiAgICBiZWZvcmVSZW1vdmU6IEZ1bmN0aW9uLA0KICB9LA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBpc1Nob3dWaWRlbzogZmFsc2UsDQogICAgICB2aWRlb1VwbG9hZFBlcmNlbnQ6IDAsDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAvLyDmmK/lkKbmmL7npLrmj5DnpLoNCiAgICBzaG93VGlwKCkgew0KICAgICAgcmV0dXJuIHRoaXMuaXNTaG93VGlwICYmICh0aGlzLmZpbGVUeXBlIHx8IHRoaXMuZmlsZVNpemUpOw0KICAgIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDkuIrkvKDlpKflsI/lkozmoLzlvI/mo4DmtYsNCiAgICBoYW5kbGVCZWZvcmVVcGxvYWRWaWRlbyhmaWxlKSB7DQogICAgICAvLyDmoKHmo4DmoLzlvI8NCiAgICAgIGxldCBpc1ZpZGVvID0gZmFsc2U7DQogICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLmZpbGVUeXBlKSkgew0KICAgICAgICBjb25zdCB0eXBlID0gZmlsZS50eXBlLnNwbGl0KCIvIik7DQogICAgICAgIGlzVmlkZW8gPSB0eXBlWzBdID09PSAidmlkZW8iICYmIHRoaXMuZmlsZVR5cGUuaW5jbHVkZXModHlwZVsxXSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpc1ZpZGVvID0gZmlsZS50eXBlLmluY2x1ZGVzKCJ2aWRlbyIpOw0KICAgICAgfQ0KDQogICAgICBpZiAoIWlzVmlkZW8pIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihgJHtmaWxlLm5hbWV95qC85byP5LiN5q2j56GuLCDor7fkuIrkvKDmoLzlvI/mraPnoa7nmoTop4bpopFgKTsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KDQogICAgICAvLyDmoKHmo4Dmlofku7blpKflsI8NCiAgICAgIGlmICh0aGlzLmZpbGVTaXplKSB7DQogICAgICAgIGNvbnN0IGlzTHQgPSBmaWxlLnNpemUgLyAxMDI0IC8gMTAyNCA8IHRoaXMuZmlsZVNpemU7DQogICAgICAgIGlmICghaXNMdCkgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoYOS4iuS8oOinhumikeWkp+Wwj+S4jeiDvei2hei/hyR7dGhpcy5maWxlU2l6ZX1NQuWTpiFgKTsNCiAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiB0cnVlOw0KICAgIH0sDQoNCiAgICAvLyDkuIrkvKDov5vluqYNCiAgICBoYW5kbGVVcGxvYWRQcm9jZXNzKGV2ZW50LCBmaWxlKSB7DQogICAgICB0aGlzLnZpZGVvVXBsb2FkUGVyY2VudCA9IE51bWJlcihmaWxlLnBlcmNlbnRhZ2UudG9GaXhlZCgwKSk7DQogICAgfSwNCg0KICAgIC8vIOS4iuS8oOaIkOWKnw0KICAgIGhhbmRsZVVwbG9hZFN1Y2Nlc3MocmVzcG9uc2UsIGZpbGUpIHsNCiAgICAgIHRoaXMudmlkZW9VcGxvYWRQZXJjZW50ID0gMDsNCiAgICAgIGlmICh0aGlzLmlzU2hvd1N1Y2Nlc3NUaXApIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLkuIrkvKDmiJDlip8hIik7DQogICAgICB9DQogICAgICBpZiAodGhpcy5yZXNwb25zZUZuKSB7DQogICAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdGhpcy5yZXNwb25zZUZuKHJlc3BvbnNlLCBmaWxlKSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHJlc3BvbnNlKTsNCiAgICAgIH0NCiAgICB9LA0KDQogICAgLy8g5LiK5Lyg5aSx6LSlDQogICAgaGFuZGxlVXBsb2FkRXJyb3IoZXJyLCBmaWxlLCBmaWxlTGlzdCkgew0KICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5LiK5Lyg5aSx6LSlLCDor7fph43or5UhIik7DQogICAgICB0aGlzLnZpZGVvVXBsb2FkUGVyY2VudCA9IDA7DQogICAgICB0aGlzLiRlbWl0KCJlcnJvciIsIGVyciwgZmlsZSwgZmlsZUxpc3QpOw0KICAgIH0sDQoNCiAgICAvLyDliKDpmaTop4bpopENCiAgICBkb1JlbW92ZSgpIHsNCiAgICAgIHRoaXMuJGVtaXQoImRlbGV0ZSIpOw0KICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCBudWxsKTsNCiAgICB9LA0KDQogICAgaGFuZGxlUmVtb3ZlKCkgew0KICAgICAgaWYgKCF0aGlzLmJlZm9yZVJlbW92ZSkgew0KICAgICAgICB0aGlzLmRvUmVtb3ZlKCk7DQogICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzLmJlZm9yZVJlbW92ZSA9PT0gImZ1bmN0aW9uIikgew0KICAgICAgICBjb25zdCBiZWZvcmUgPSB0aGlzLmJlZm9yZVJlbW92ZSh0aGlzLnZhbHVlKTsNCiAgICAgICAgaWYgKGJlZm9yZSAmJiBiZWZvcmUudGhlbikgew0KICAgICAgICAgIGJlZm9yZS50aGVuKA0KICAgICAgICAgICAgKCkgPT4gew0KICAgICAgICAgICAgICB0aGlzLmRvUmVtb3ZlKCk7DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgKCkgPT4ge30NCiAgICAgICAgICApOw0KICAgICAgICB9IGVsc2UgaWYgKGJlZm9yZSAhPT0gZmFsc2UpIHsNCiAgICAgICAgICB0aGlzLmRvUmVtb3ZlKCk7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOaSreaUvuinhumikQ0KICAgIGhhbmRsZVBsYXllclZpZGVvKCkgew0KICAgICAgdGhpcy5pc1Nob3dWaWRlbyA9IHRydWU7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["EleUploadVideo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"EleUploadVideo.vue","sourceRoot":"node_modules/vue-ele-upload-video/lib","sourcesContent":["<template>\r\n  <div class=\"ele-upload-video\">\r\n    <!-- 上传组件 -->\r\n    <el-upload\r\n      :accept=\"accept\"\r\n      :action=\"action\"\r\n      :before-upload=\"handleBeforeUploadVideo\"\r\n      :data=\"data\"\r\n      :disabled=\"videoUploadPercent > 0 && videoUploadPercent < 100\"\r\n      :headers=\"headers\"\r\n      :httpRequest=\"httpRequest\"\r\n      :name=\"name\"\r\n      :on-error=\"handleUploadError\"\r\n      :on-progress=\"handleUploadProcess\"\r\n      :on-success=\"handleUploadSuccess\"\r\n      :show-file-list=\"false\"\r\n      :withCredentials=\"withCredentials\"\r\n      drag\r\n      v-if=\"!value\"\r\n    >\r\n      <!-- 上传进度 -->\r\n      <el-progress\r\n        :percentage=\"videoUploadPercent\"\r\n        style=\"margin-top: 20px;\"\r\n        type=\"circle\"\r\n        v-if=\"videoUploadPercent > 0\"\r\n      />\r\n\r\n      <!-- 上传提示 -->\r\n      <template v-else>\r\n        <i class=\"el-icon-upload\"></i>\r\n        <div class=\"el-upload__text\">\r\n          将视频拖到此处，或\r\n          <em>点击上传</em>\r\n        </div>\r\n        <div class=\"el-upload__tip\" slot=\"tip\" v-if=\"showTip\">\r\n          请上传\r\n          <span style=\"color: #f56c6c;\"\r\n            >&nbsp;{{\r\n              this.fileType ? this.fileType.join(\"/\") : \"视频\"\r\n            }}&nbsp;</span\r\n          >格式文件\r\n          <template v-if=\"fileSize\">\r\n            ，且文件大小不超过\r\n            <span style=\"color: #f56c6c;\">{{ fileSize }}</span\r\n            >&nbsp;MB\r\n          </template>\r\n        </div>\r\n      </template>\r\n    </el-upload>\r\n\r\n    <!-- 视频缩略 -->\r\n    <vue-hover-mask v-if=\"value\">\r\n      <video\r\n        :autoplay=\"false\"\r\n        :src=\"value\"\r\n        :style=\"{\r\n          width: width + 'px',\r\n          height: height ? height + 'px' : 'auto',\r\n        }\"\r\n      >\r\n        您的浏览器不支持视频播放\r\n      </video>\r\n      <template v-slot:action>\r\n        <span @click=\"handlePlayerVideo\" class=\"ele-upload-video_mask__item\">\r\n          <i class=\"el-icon-zoom-in\"></i>\r\n        </span>\r\n        <span @click=\"handleRemove\" class=\"ele-upload-video_mask__item\">\r\n          <i class=\"el-icon-delete\"></i>\r\n        </span>\r\n      </template>\r\n    </vue-hover-mask>\r\n\r\n    <!-- 弹窗播放 -->\r\n    <el-dialog :visible.sync=\"isShowVideo\" append-to-body>\r\n      <video\r\n        :autoplay=\"true\"\r\n        :src=\"value\"\r\n        controls=\"controls\"\r\n        style=\"width: 100%;\"\r\n        v-if=\"isShowVideo\"\r\n      >\r\n        您的浏览器不支持视频播放\r\n      </video>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport VueHoverMask from \"vue-hover-mask\";\r\n\r\nexport default {\r\n  name: \"EleUploadVideo\",\r\n  components: {\r\n    VueHoverMask,\r\n  },\r\n  props: {\r\n    // 值\r\n    value: {\r\n      type: String,\r\n    },\r\n    // 上传地址\r\n    action: {\r\n      type: String,\r\n      required: true,\r\n    },\r\n    // 响应处理函数\r\n    responseFn: Function,\r\n    // 文件大小限制(Mb)\r\n    fileSize: {\r\n      type: Number,\r\n    },\r\n    // 显示宽度(px)\r\n    width: {\r\n      type: Number,\r\n      default: 360,\r\n    },\r\n    // 显示高度(默认auto)\r\n    height: {\r\n      type: Number,\r\n    },\r\n    // 是否显示提示\r\n    isShowTip: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    // 是否显示上传成功的提示\r\n    isShowSuccessTip: {\r\n      type: Boolean,\r\n      default: true,\r\n    },\r\n    // 文件类型\r\n    fileType: {\r\n      type: Array,\r\n    },\r\n    // 设置上传的请求头部(同官网)\r\n    headers: Object,\r\n    // 支持发送 cookie 凭证信息 (同官网)\r\n    withCredentials: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    // 上传时附带的额外参数(同官网)\r\n    data: {\r\n      type: Object,\r\n    },\r\n    // 上传的文件字段名 (同官网)\r\n    name: {\r\n      type: String,\r\n      default: \"file\",\r\n    },\r\n    // 覆盖默认的上传行为，可以自定义上传的实现 (同官网)\r\n    httpRequest: Function,\r\n    // 接受上传的文件类型（thumbnail-mode 模式下此参数无效）(同官网)\r\n    accept: String,\r\n    // 删除前的操作(同官网)\r\n    beforeRemove: Function,\r\n  },\r\n  data() {\r\n    return {\r\n      isShowVideo: false,\r\n      videoUploadPercent: 0,\r\n    };\r\n  },\r\n  computed: {\r\n    // 是否显示提示\r\n    showTip() {\r\n      return this.isShowTip && (this.fileType || this.fileSize);\r\n    },\r\n  },\r\n  methods: {\r\n    // 上传大小和格式检测\r\n    handleBeforeUploadVideo(file) {\r\n      // 校检格式\r\n      let isVideo = false;\r\n      if (Array.isArray(this.fileType)) {\r\n        const type = file.type.split(\"/\");\r\n        isVideo = type[0] === \"video\" && this.fileType.includes(type[1]);\r\n      } else {\r\n        isVideo = file.type.includes(\"video\");\r\n      }\r\n\r\n      if (!isVideo) {\r\n        this.$message.error(`${file.name}格式不正确, 请上传格式正确的视频`);\r\n        return false;\r\n      }\r\n\r\n      // 校检文件大小\r\n      if (this.fileSize) {\r\n        const isLt = file.size / 1024 / 1024 < this.fileSize;\r\n        if (!isLt) {\r\n          this.$message.error(`上传视频大小不能超过${this.fileSize}MB哦!`);\r\n          return false;\r\n        }\r\n      }\r\n      return true;\r\n    },\r\n\r\n    // 上传进度\r\n    handleUploadProcess(event, file) {\r\n      this.videoUploadPercent = Number(file.percentage.toFixed(0));\r\n    },\r\n\r\n    // 上传成功\r\n    handleUploadSuccess(response, file) {\r\n      this.videoUploadPercent = 0;\r\n      if (this.isShowSuccessTip) {\r\n        this.$message.success(\"上传成功!\");\r\n      }\r\n      if (this.responseFn) {\r\n        this.$emit(\"input\", this.responseFn(response, file));\r\n      } else {\r\n        this.$emit(\"input\", response);\r\n      }\r\n    },\r\n\r\n    // 上传失败\r\n    handleUploadError(err, file, fileList) {\r\n      this.$message.error(\"上传失败, 请重试!\");\r\n      this.videoUploadPercent = 0;\r\n      this.$emit(\"error\", err, file, fileList);\r\n    },\r\n\r\n    // 删除视频\r\n    doRemove() {\r\n      this.$emit(\"delete\");\r\n      this.$emit(\"input\", null);\r\n    },\r\n\r\n    handleRemove() {\r\n      if (!this.beforeRemove) {\r\n        this.doRemove();\r\n      } else if (typeof this.beforeRemove === \"function\") {\r\n        const before = this.beforeRemove(this.value);\r\n        if (before && before.then) {\r\n          before.then(\r\n            () => {\r\n              this.doRemove();\r\n            },\r\n            () => {}\r\n          );\r\n        } else if (before !== false) {\r\n          this.doRemove();\r\n        }\r\n      }\r\n    },\r\n    // 播放视频\r\n    handlePlayerVideo() {\r\n      this.isShowVideo = true;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.ele-upload-video_mask__item {\r\n  padding: 0 10px;\r\n}\r\n\r\n.ele-upload-video .el-upload__tip {\r\n  line-height: 12px;\r\n}\r\n</style>\r\n"]}]}